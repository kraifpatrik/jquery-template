!function(t){"use strict";var e={},n={},a={};function r(a,i,s){var l,p,f,u,d,h,v,m,g,y,b,x,O=this;return i=i||{},f=t.extend(!0,{async:!0,overwriteCache:!1,complete:null,success:null,error:function(){t(this).each(function(){t(this).html(f.errorMessage)})},errorMessage:"There was an error loading the template.",paged:!1,pageNo:1,elemPerPage:10,append:!1,prepend:!1,beforeInsert:null,afterInsert:null,bindingOptions:{ignoreUndefined:!1,ignoreNull:!1,ignoreEmptyString:!1}},s),"array"===t.type(i)?(!0,function(e,n,a){a=a||{};var i,o=this,c=n.length,s=a.prepend&&!a.append,l=0,p=0,f=!1,u=[];if(a.paged){var d=(a.pageNo-1)*a.elemPerPage;n=n.slice(d,d+a.elemPerPage),c=n.length}a.append||a.prepend||o.html("");i=t.extend({},a,{append:!a.prepend&&!0,complete:function(t){(++l===c||f)&&(f&&a&&"function"==typeof a.error&&a.error.call(o,u),a&&"function"==typeof a.complete&&a.complete())},success:function(){++p===c&&a&&"function"==typeof a.success&&a.success()},error:function(t){f=!0,u.push(t)}}),s&&n.reverse();return t(n).each(function(){if(r.call(o,e,this,i),f)return!1}),this}.call(this,a,i,f)):("string"==typeof(u=a)&&u.indexOf("/")>-1||(l=t(a),"string"==typeof a&&0===a.indexOf("#")&&(f.isFile=!1)),(p=f.isFile||void 0===f.isFile&&(void 0===l||0===l.length))&&!f.overwriteCache&&e[a]?(g=O,y=i,b=f,x=e[a].clone(),c.call(g,x,y,b),"function"==typeof b.success&&b.success()):p&&!f.overwriteCache&&e.hasOwnProperty(a)?(h=O,v=i,m=f,n[d=a]?n[d].push({data:v,selection:h,settings:m}):n[d]=[{data:v,selection:h,settings:m}]):p?function(a,r,i,s){e[a]=null;var l=a;s.overwriteCache&&(l=-1!==(p=l).indexOf("?")?p+"&_="+o():p+"?_="+o());var p;t.ajax({url:l,async:s.async,success:function(o){!function(t,a,r,i,o){var s;e[a]=t.clone(),c.call(r,t,i,o),"function"==typeof o.success&&o.success.call(r);for(;n[a]&&(s=n[a].shift());)c.call(s.selection,e[a].clone(),s.data,s.settings),"function"==typeof s.settings.success&&s.settings.success.call(s.selection)}(t(o),a,r,i,s)},error:function(e){!function(e,a,r,i,o){var c;"function"==typeof i.error&&i.error.call(a,o);t(n[e]).each(function(t,e){"function"==typeof e.settings.error&&e.settings.error.call(e.selection,o)}),"function"==typeof i.complete&&i.complete.call(a);for(;n[e]&&(c=n[e].shift());)"function"==typeof c.settings.complete&&c.settings.complete.call(c.selection);void 0!==n[e]&&n[e].length>0&&(n[e]=[])}(a,r,0,s,e)}})}(a,O,i,f):function(e,n,a,r){(e.is("script")||e.is("template"))&&(e=t.parseHTML(t.trim(e.html())));c.call(n,e,a,r),"function"==typeof r.success&&r.success()}(l,O,i,f),this)}function i(e,n){n?a[e]=n:a=t.extend(a,e)}function o(){return(new Date).getTime()}function c(e,n,a){var r,i,o,c,d;e=t("<div/>").append(e);s("data-title",r=e,i=(i=n)||{},o=a,function(t,e){t.attr("title",u(t,e,"title",o))}),s("data-content",r,i,o,function(t,e){t.html(u(t,e,"content",o))}),s("data-content-append",r,i,o,function(t,e){t.append(u(t,e,"content",o))}),s("data-content-prepend",r,i,o,function(t,e){t.prepend(u(t,e,"content",o))}),s("data-content-text",r,i,o,function(t,e){t.text(u(t,e,"content",o))}),s("data-innerHTML",r,i,o,function(t,e){t.html(u(t,e,"content",o))}),s("data-src",r,i,o,function(t,e){t.attr("src",u(t,e,"src",o))},function(t){t.remove()}),s("data-href",r,i,o,function(t,e){t.attr("href",u(t,e,"href",o))},function(t){t.remove()}),s("data-alt",r,i,o,function(t,e){t.attr("alt",u(t,e,"alt",o))}),s("data-id",r,i,o,function(t,e){t.attr("id",u(t,e,"id",o))}),s("data-class",r,i,o,function(t,e){t.addClass(u(t,e,"class",o))}),s("data-link",r,i,o,function(e,n){var a=t("<a/>");a.attr("href",u(e,n,"link",o)),a.html(e.html()),e.html(a)}),s("data-link-wrap",r,i,o,function(e,n){var a=t("<a/>");a.attr("href",u(e,n,"link-wrap",o)),e.wrap(a)}),s("data-options",r,i,o,function(e,n){t(n).each(function(){var n=t("<option/>");n.attr("value",this).text(this).appendTo(e)})}),c=i,d=o,t("[data-template-bind]",r).each(function(){var e=t(this),n=t.parseJSON(e.attr("data-template-bind"));e.removeAttr("data-template-bind"),t(n).each(function(){var n;if(n="object"==typeof this.value?f(c,this.value.data):f(c,this.value),this.attribute){if(!l(this,n,d))return void e.remove();switch(this.attribute){case"content":case"innerHTML":e.html(p(e,n,this));break;case"contentAppend":e.append(p(e,n,this));break;case"contentPrepend":e.prepend(p(e,n,this));break;case"contentText":e.text(p(e,n,this));break;case"options":var a=this;t(n).each(function(){var n=t("<option/>");n.attr("value",this[a.value.value]).text(p(e,this[a.value.content],a)).attr("selected",null!=typeof this[a.value.selected]&&this[a.value.selected]).appendTo(e)});break;default:e.attr(this.attribute,p(e,n,this))}}})}),s("data-value",r,i,o,function(t,e){t.val(u(t,e,"value",o))}),t(this).each(function(){var r=e.children().clone(!0);t("select",r).each(function(n,a){t(this).val(t("select",e).eq(n).val())}),a.beforeInsert&&a.beforeInsert(r,n),a.append?t(this).append(r):a.prepend?t(this).prepend(r):t(this).html("").append(r),a.afterInsert&&a.afterInsert(r,n)}),"function"==typeof a.complete&&a.complete.call(t(this),n)}function s(e,n,a,r,i,o){t("["+e+"]",n).each(function(){var n=t(this),c=n.attr(e),s=f(a,c);l(n,s,r)?(n.removeAttr(e),void 0!==s&&i?i(n,s):o&&o(n)):n.remove()})}function l(e,n,a){var r=function(e,n){var a={};e instanceof jQuery&&e.attr("data-binding-options")?(a=t.parseJSON(e.attr("data-binding-options")),e.removeAttr("data-binding-options")):"object"==typeof e&&e.hasOwnProperty("bindingOptions")&&(a=e.bindingOptions);return t.extend({},n.bindingOptions,a)}(e,a);return(!r.ignoreUndefined||void 0!==n)&&((!r.ignoreNull||null!==n)&&(!r.ignoreEmptyString||""!==n))}function p(t,e,n,r){return n.formatter&&a[n.formatter]?(i=r,a[n.formatter].call(t,e,n.formatOptions,i)):e;var i}function f(t,e){if("this"===e)return t;for(var n,a=e.split("."),r=t;(n=a.shift())&&void 0!==r&&null!=r;)r=r[n];return r}function u(e,n,r,i){var o,c,s=e.attr("data-format-target");if((s===r||!s&&"content"===r)&&(o=e.attr("data-format"))&&"function"==typeof a[o]){var l=e.attr("data-format-options");return c=i,a[o].call(e[0],n,l,t.extend({},c))}return n}i("nestedTemplateFormatter",function(e,n,a){if(n){"string"==typeof n&&"{"===n[0]&&(n=t.parseJSON(n));var r=n.parentElement||"div",i=n.template||n;return n.parentElement?t("<"+r+"/>").loadTemplate(i,e,a):t("<"+r+"/>").loadTemplate(i,e,a).children()}}),t.fn.loadTemplate=r,t.addTemplateFormatter=i}(jQuery);